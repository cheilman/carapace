#!/usr/bin/env zsh
# vim: filetype=zsh
#
# Build a database of all the files in my home directory.
#

PATH=$HOME/bin:$PATH

updatedb --version 2> /dev/null | grep "GNU findutils" > /dev/null

if [ $? -eq 0 ]; then
    pathz="$HOME/."
    if [ -L $HOME/workplace ]; then
        # Add specifically if it's a symlink
        pathz="$pathz $HOME/workplace/."
    fi

    nice -n 10 updatedb --output=$HOME/.home-dir-db --localpaths=$pathz --prunepaths="$HOME/./.lpass"
else
    nice -n 10 updatedb -l 0 -o $HOME/.home-dir-db -U $HOME
fi

exit $?

