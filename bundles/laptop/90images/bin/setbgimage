#!/usr/bin/env zsh
# vim: filetype=zsh
#
# Set X background image
#

BACKGROUNDFILES=$HOME/.backgrounds

# Set background to black
xsetroot -solid '#000000' &

# Primary is head #0
hd=0
for i in `xrandr --query | grep -e ' connected primary' | grep -oe '[1-9][0-9]*x[1-9][0-9]*'`; do
    /usr/local/bin/nitrogen --set-auto --random --set-color=111111 --head=$hd $BACKGROUNDFILES/$i 2>>~/.setbgimage-errors
    hd=$(( $hd + 1 ))
done

# Get the other heads and guess at the order
for i in `xrandr --query | grep -e ' connected [^p]' | grep -oe '[1-9][0-9]*x[1-9][0-9]*'`; do
    /usr/local/bin/nitrogen --set-auto --random --set-color=111111 --head=$hd $BACKGROUNDFILES/$i 2>>~/.setbgimage-errors
    hd=$(( $hd + 1 ))
done

